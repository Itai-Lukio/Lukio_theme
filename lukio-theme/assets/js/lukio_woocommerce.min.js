(function(a){a(document).ready(function(){a("body").on("wc_fragments_loaded wc_fragments_refreshed updated_checkout updated_cart_totals",function(){a.ajax({method:"POST",url:lukio_wc_ajax.ajax_url,data:{action:"lukio_woocommerce_refresh_mini_cart"},success:function(t){t&&(t=JSON.parse(t),a(".lukio_mini_cart_wrapper").html(t.fragment),a("body").trigger("lukio_cart_num_refresh",[t.items_count]),a("body").trigger("lukio_refresh_mini_cart_extra",[t.extra]))}})}),a(document).on("click",".lukio_cart_product_quantity_btn",function(){let t=a(this),o=t.parent();if(o.hasClass("working")||t.hasClass("plus")&&o.hasClass("plus_disabled"))return;let _=parseInt(o.find(".lukio_cart_product_quantity_display").text());t.hasClass("minus")?_--:t.hasClass("plus")&&_++,o.addClass("working"),a.ajax({method:"POST",url:lukio_wc_ajax.ajax_url,data:{action:"lukio_update_cart_quantity",cart_item:o.data("key"),quantity:_},success:function(){a("body").trigger("lukio_update_wc_parts")}})}),a("body").on("lukio_update_wc_parts",function(){switch(window.location.origin+window.location.pathname){case lukio_wc_ajax.checkout_url:a("body").trigger("update_checkout");break;case lukio_wc_ajax.cart_url:a("body").trigger("wc_update_cart");break;default:a("body").trigger("wc_fragment_refresh")}});let t=window.location.origin+window.location.pathname;t!=lukio_wc_ajax.cart_url&&t!=lukio_wc_ajax.checkout_url||a(document).on("click",".lukio_mini_cart_wrapper .remove",function(){a("body").one("wc_fragments_loaded",function(){a("body").trigger("lukio_update_wc_parts")})}),a('.lukio_add_to_cart_form_wrapper input[name="quantity"]').on("change",function(){let t=a(this);t.closest(".lukio_add_to_cart_form_wrapper").find(".lukio_add_btn").attr("data-quantity",t.val())}),a('.lukio_add_to_cart_form_wrapper input[name="variation_id"]').on("change",function(){let t=a(this);t.closest(".lukio_add_to_cart_form_wrapper").find(".lukio_add_btn").attr("data-product_id",t.val())})})})(jQuery);