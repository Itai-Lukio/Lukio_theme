jQuery(document).ready(function(o){function e(o){return o.replaceAll(" ",".")}function t(o){lukio_helpers.animate_size(o,"height",0,400,0,{opacity:"0"},()=>{o.remove()})}function i(o){return 0!=o.siblings().length}function l(o){k&&g&&(localStorage.setItem(m,o),sessionStorage.setItem(m,o))}function r(e,t){e.each(function(){let e=this.outerHTML,i=o(this),l=i.data("place");o(this).remove(),"viewport"==l?t.append(e):t.closest(".woocommerce-product-gallery").append(e)})}function a(o,e){let t=o[0].outerHTML;o.remove(),e.append(t)}function c(o,e,t){if(o.data("loop"))return;let i=o.closest(".woocommerce-product-gallery"),l=i.find(".lukio_product_gallery_arrow"),r=e.children("li"),a=0==t?"addClass":"removeClass",c=t==r.length-1?"addClass":"removeClass";l.filter(".prev")[a]("disable"),l.filter(".next")[c]("disable")}function n(o,e){let t=o.find(".lukio_product_gallery_arrow.prev"),i=o.find("ol.flex-control-nav"),l=e+1;i.find(`.${w}`).removeClass(w),i.find(`li:nth-of-type(${l})`).addClass(w),c(t,i,e);let r=i.find(`.${w}`);lukio_helpers.scroll_horizontally(r,i),o.find(".lukio_product_gallery_pagination_dot.active").removeClass("active"),o.find(`.lukio_product_gallery_pagination_dot:nth-of-type(${l})`).addClass("active"),u.trigger("lukio_gallery_display_updated",[o,i,r,e])}function s(){let e=o(".lukio_product_gallery_arrow"),t=o(".lukio_product_gallery_pagination"),i=e.closest(".flex-viewport"),l=e.closest(".woocommerce-product-gallery"),c=l.find("ol.flex-control-nav.flex-control-thumbs");0!=e.length&&(c.addClass("lukio_product_gallery_thumbs"),c.lukioDragScroll(),r(e,i),0!=t.length&&a(t,i),n(l,0))}let _=o(".lukio_mini_cart_wrapper"),u=o("body"),d=window.location.origin+window.location.pathname,m=wc_cart_fragments_params.cart_hash_key,f="wc_fragments_refreshed",p=d==lukio_woo.checkout_url,g=d==lukio_woo.cart_url||p,k=!0,h=!1,w="lukio_active_thumb";switch(d){case lukio_woo.checkout_url:f+=" updated_checkout";break;case lukio_woo.cart_url:f="updated_cart_totals wc_cart_emptied";break;default:f+=" wc_fragments_loaded"}try{window.sessionStorage.setItem("lukio_storage_check","test"),window.sessionStorage.removeItem("lukio_storage_check"),window.localStorage.setItem("lukio_storage_check","test"),window.localStorage.removeItem("lukio_storage_check")}catch(o){k=!1}k&&g&&o(window).on("storage onstorage",function(o){m===o.originalEvent.key&&localStorage.getItem(m)!==sessionStorage.getItem(m)&&(p&&(h=!0),u.trigger("lukio_update_wc_parts"))}),s(),u.on(f,function(){h?h=!1:o.ajax({method:"POST",url:lukio_localize.ajax_url,data:{action:"lukio_woocommerce_refresh_mini_cart"},success:function(t){if(t){if(t=JSON.parse(t),!1===u.triggerHandler("lukio_should_fully_refresh_minicart")){let i=document.createElement("div");i.innerHTML=t.fragment;let l=o(i);i.remove(),l.find(".always_refresh").each(function(){_.find("."+e(this.className)).html(this.innerHTML)}),u.trigger("lukio_minicart_not_fully_refreshed",[l])}else _.html(t.fragment);l(t.cart_hash),u.trigger("lukio_cart_num_refresh",[t.items_count]).trigger("lukio_refresh_mini_cart_extra",[t.extra]).trigger("lukio_minicart_refreshed")}}})}).on("should_send_ajax_request.adding_to_cart",function(o,e){if(e.hasClass("disabled"))return!1;let t=e.closest(".lukio_theme_add_to_cart_form_wrapper");if(1==t.length){let o=t.find('input[name="quantity"]');1==o.length&&e.attr("data-quantity",o.val());let i=t.find('input[name="variation_id"]');1==i.length&&e.attr("data-product_id",i.val())}}).on("lukio_update_wc_parts",function(){switch(window.location.origin+window.location.pathname){case lukio_woo.checkout_url:u.trigger("update_checkout");break;case lukio_woo.cart_url:u.trigger("wc_update_cart");break;default:u.trigger("wc_fragment_refresh")}}),o(document).on("click",".lukio_cart_product_quantity_btn",function(){let l=o(this),r=l.parent(),a=l.closest("li");if(r.hasClass("working")||l.hasClass("plus")&&r.hasClass("plus_disabled"))return;let c=parseInt(r.find(".lukio_cart_product_quantity_display").text());l.hasClass("minus")?c--:l.hasClass("plus")&&c++,r.addClass("working"),o.ajax({method:"POST",url:lukio_localize.ajax_url,data:{action:"lukio_update_cart_quantity",cart_item:r.data("key"),quantity:c},success:function(){if(1==a.closest(".lukio_mini_cart_wrapper").length){let o=i(a);(o||!o&&0!=c)&&u.one("lukio_should_fully_refresh_minicart",function(){return!1}).one("lukio_minicart_not_fully_refreshed",function(o,i){0!=c?a.html(i.find("."+e(a.attr("class"))).eq(a.index()).html()):t(a)})}u.trigger("lukio_update_wc_parts")}})}).on("click",".lukio_mini_cart_wrapper .remove",function(){let e=o(this).closest("li");i(e)?u.one("wc_fragments_loaded",function(){u.one("lukio_should_fully_refresh_minicart",function(){return!1}),g&&u.trigger("lukio_update_wc_parts")}).one("lukio_minicart_refreshed",function(){t(e)}):u.one("wc_fragments_loaded",function(){g&&u.trigger("lukio_update_wc_parts")})}).on("click",".woocommerce-product-gallery ol.flex-control-nav.flex-control-thumbs li",function(e){let t=o(this),i=t.closest(".flex-control-nav.flex-control-thumbs"),l=i.closest(".woocommerce-product-gallery"),r=t.index();n(l,r)}).on("click",".lukio_product_gallery_arrow",function(e){e.stopPropagation();let t=o(this);if(t.hasClass("disbled"))return;let i=t.data("action"),l=t.closest(".woocommerce-product-gallery"),r=t.data("loop"),a="next"==i?1:-1,c=l.find("ol.flex-control-nav"),n=c.find("li"),s=n.length-1,_=c.find(".flex-active").closest("li"),u=_.index()+a;u<0?u=r?s:0:u>s&&(u=r?0:s);let d=n.eq(u);d.find("img").trigger("click")}).on("click",".lukio_product_gallery_pagination_dot",function(){let e=o(this),t=e.data("index"),i=e.closest(".woocommerce-product-gallery");e.hasClass("active")||i.find("ol.flex-control-nav li").eq(t).find("img").trigger("click")}).on("zoom.destroy",".woocommerce-product-gallery__image.flex-active-slide",function(){let e=o(this).closest(".woocommerce-product-gallery"),t=e.find(".flex-control-nav.flex-control-thumbs .flex-active").closest("li").index();n(e,t)}).on("click",".lukio_woocommerce_product_variations_li",function(e){e.stopPropagation();let t=o(this);if(t.hasClass("selected"))return;let i=t.data("value"),l=t.closest(".lukio_woocommerce_product_variations_wrapper"),r=l.find(".lukio_woocommerce_product_variations_dropdown_display");l.find(".lukio_woocommerce_product_variations_li.selected").removeClass("selected"),t.addClass("selected"),l.find("select").val(i).trigger("change"),0!=r.length&&(r.text(t.text()),o("body").trigger("click.lukio_woocommerce_product_variation_clicked"))}).on("keydown",".lukio_woocommerce_product_variations_li",function(e){!e.key||"enter"!=e.key.toLocaleLowerCase()&&" "!=e.key||(e.preventDefault(),o(this).trigger("click"))}).on("click",".variations_form a.reset_variations",function(){let e=o(this).closest("form");e.find(".lukio_woocommerce_product_variations_li.selected").removeClass("selected"),e.find(".lukio_woocommerce_product_variations_dropdown_display").each(function(){let e=o(this);e.text(e.data("placeholder"))})}).on("click",".lukio_woocommerce_product_variations_dropdown",function(){let e=o(this),t=e.find(".lukio_woocommerce_product_variations_ul");e.addClass("open"),o("body").one("click.lukio_woocommerce_product_variation_clicked",function(){t.addClass("closing"),e.removeClass("open"),setTimeout(()=>{t.removeClass("closing")},400)})}).on("focus",".lukio_woocommerce_product_variations_li.dropdown",function(){o(this).closest(".lukio_woocommerce_product_variations_dropdown").trigger("click")}).on("blur",".lukio_woocommerce_product_variations_li.dropdown",function(){o("body").trigger("click.lukio_woocommerce_product_variation_clicked")})});